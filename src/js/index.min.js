$(document).ready(function () {
    console.warn('Page loaded!');

    let colors = [ 60, 66, 65, 55, 56, 63, 69, 21, 22, 23, 29, 81, 89, 40, 41, 99, 61, 78];

    getAllColors();
    function getAllColors () {
        colors.forEach(img => {
            $('#color').append('<option value="' + img + '">' + img + '</option>');
        })
    }

    $('#submit-button').click(function () {
        if($('#monograme').val().length) {
            if($('#font').val().length) {
                if($('#position').val().length) {
                    if($('#color').val().length) {
                        $.ajax({
                            url: 'http://localhost:1880/broidery_order?m='+$('#monograme').val()+'&f='+$('#font').val()+'&c='+$('#color').val()+'&p='+$('#position').val(),
                            type: 'GET',
                            success: function(data) {
                                $('#thumbail-index').attr('src', 'data:image/png;base64, ' + data.imagine);
                            }
                        })
                    } 
                    else showMessageError("You don't select Color text!"); 
                } 
                else showMessageError("You don't select Position text!"); 
            } 
            else showMessageError("You don't select Font text!"); 
        } 
        else showMessageError("You don't inserted Monograme text!"); 
    })

    function showMessageError(input) {
        console.error(input);
    }

    $(document).keypress(function(e) {
        let keyCode = (e.keyCode ? e.keyCode : e.keyCode) 
        if(keyCode == "13") $('#submit-button').click();
    })
})